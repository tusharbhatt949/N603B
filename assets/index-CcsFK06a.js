import{V as R,M as yt,a as bt,N as At,A as ke,E as Et,P as _t,b as v,S as It,c as h}from"./babylon-D-kUFXnA.js";import{e as Tt}from"./vendor-C-pjYnfH.js";(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))a(i);new MutationObserver(i=>{for(const o of i)if(o.type==="childList")for(const s of o.addedNodes)s.tagName==="LINK"&&s.rel==="modulepreload"&&a(s)}).observe(document,{childList:!0,subtree:!0});function n(i){const o={};return i.integrity&&(o.integrity=i.integrity),i.referrerPolicy&&(o.referrerPolicy=i.referrerPolicy),i.crossOrigin==="use-credentials"?o.credentials="include":i.crossOrigin==="anonymous"?o.credentials="omit":o.credentials="same-origin",o}function a(i){if(i.ep)return;i.ep=!0;const o=n(i);fetch(i.href,o)}})();var g=(e=>(e.Performance="Performance",e.Comfort="Comfort",e.Design="Design",e.Safety="Safety",e.Technology="Technology",e.Convenience="Convenience",e.HeavyDuty="Heavy Duty",e))(g||{}),w=(e=>(e.PristineWhite="Pristine White",e.NeptuneBlue="Neptune Blue",e))(w||{}),y=(e=>(e.AUTO="Auto",e.MANUAL="Manual",e))(y||{});function Ct(){let e=document.createElement("div");return e.id="chargingTextContainer",e.innerHTML=`
    <div id = "chargingInfo-container">
        <p id="chargingTextLabel">0%</p>
        <p id="chargingSubtitle">In 3hr 10min</p>
        <!-- <div id="chargingIncrementNumber-container">
            <p id="chargingIncrementNumber">00</p>
            <p id="chargingKmLabel">KMs</p>
        </div> -->
    </div>`,e.classList.add("hidden"),e}const Mt=()=>{const e=document.getElementById("chargingTextContainer");e==null||e.classList.add("hidden")},St=()=>{const e=document.getElementById("chargingTextContainer");e==null||e.classList.remove("hidden"),Lt()};function Lt(e=100,t=2500){const n=document.getElementById("chargingTextLabel");if(!n)return;n.textContent="0%";let a=null,i=-1;const o=s=>{a||(a=s);const r=s-a,c=Math.min(r/t,1);let d=Math.floor(c*e);d=d-d%2,d!==i&&(n.textContent=`${d}%`,i=d),r<t?requestAnimationFrame(o):n.textContent=`0-${e}%`};requestAnimationFrame(o)}function Ot(){let e=document.createElement("div");return e.id="textContainer",e.innerHTML=`
  <div id="rangeInfo-container">
    <p id="rangeTextLabel">Range</p>
    <div id="rangeIncrementNumber-container">
      <span id="rangeIncrementNumber">00</span>
      <span id="rangeKmLabel">Km/h</span>
    </div>
  </div>
`,e.classList.add("hidden"),e}function Bt(){const e=document.getElementById("textContainer");e==null||e.classList.remove("hidden");const t=document.getElementById("rangeIncrementNumber");if(!t)return;let n=0;const a=156;let i=setInterval(()=>{if(n>a){n=a;let s=n<10?`0${n}`:n.toString();t.innerHTML=s,clearInterval(i);return}let o=n<10?`0${n}`:n.toString();t.innerHTML=o,n+=2},55)}const wt=()=>{const e=document.getElementById("textContainer");e==null||e.classList.add("hidden")},xt=.5,Nt=1.65,Pt=36,Ft=55,We=0,Ge=50,Rt=65,Ye=1.65,Ke=.8,Dt=20,je=0,Ze=7.5,Xe=0,Je=["E_Charge_1","E_Charge_2","E_Charge_3","E_Charge_4","Tyre_Hill_Hold","Headlight_Flare","Hill_Hold_Arrow_Head","Healight_Glow","Indicator_Glow","LightBeam","Regen_Brake","Backlight_Glow","Call_Cube_primitive0","Call_Cube_primitive1","Drive_Mode_Cube_primitive0","Drive_Mode_Cube_primitive1","Milestone","Stop_Sign","Top_Speed_Text","Water_Wading_Text","Hill_Assist_Text","Gradeability_Text","179_Text","KMS_Text","Hill_Hold_Arrow"],Ht=600,ue="#1DF0FF",B={alpha:-3.1237,beta:1.262,radius:.2509,x:2.329,y:11.37,z:-.459,fov:1.45};let ne=!1,ge={},k=null;function kt(){const e=document.createElement("div");return e.id="autoModeTimeline",e.innerHTML=Object.values(g).map(t=>`
        <div class="category-container">
            <div class="progress-bar" id="progress-bar-${t}">
                <div class="progress-fill" id="progress-fill-${t}"></div>
            </div>
        </div>
    `).join(""),e}function Vt(e,t){const n=document.getElementById(`progress-fill-${e}`);n&&(n.style.width="0%",n.style.transition=`width ${t}s linear`,setTimeout(()=>{n.style.width="100%"},50),n.dataset.duration=`${t}`,n.dataset.startTime=`${Date.now()}`,Number(n.dataset.startTime),ge[e]=0,k=e)}function $t(){if(ne||!k)return;ne=!0;const e=document.getElementById(`progress-fill-${k}`);if(!e)return;const t=window.getComputedStyle(e);if(t.width==="0px"||t.width===t.maxWidth)return;e.style.width=t.width,e.style.transition="none";const n=Number(e.dataset.startTime||0);ge[k]+=Date.now()-n}function qt(){if(!ne||!k)return;ne=!1;const e=document.getElementById(`progress-fill-${k}`);if(!e)return;const t=Number(e.dataset.duration||0),n=ge[k]||0,a=Math.max(0,t-n/1e3);a<=0||(e.style.transition=`width ${a}s linear`,setTimeout(()=>{e.style.width="100%"},50))}function zt(){ne=!1,ge={},Object.values(g).forEach(e=>{const t=document.getElementById(`progress-fill-${e}`);t&&(t.style.width="0%",t.style.transition="none")})}function Ut(e){const t=document.createElement("button");t.innerText="Copy Camera Values",t.style.position="absolute",t.style.top="10px",t.style.right="10px",t.style.zIndex="1000",document.body.appendChild(t),t.addEventListener("click",()=>{const{alpha:n,beta:a,radius:i,target:o}=e,s=`camera: {
    alpha: ${n.toFixed(4)}, beta: ${a.toFixed(4)}, radius: ${i.toFixed(4)}, x: ${o.x.toFixed(3)}, y: ${o.y.toFixed(3)}, z: ${o.z.toFixed(3)}
},`;navigator.clipboard.writeText(s).then(()=>alert("Camera values copied to clipboard!")).catch(r=>console.error("Copy failed:",r))})}let I=null,_e=!1,Ie=!1;const he=async({alpha:e=0,beta:t=0,radius:n=2,target:a={x:0,y:0,z:0},resetToDefaultPositionFirst:i=!1})=>new Promise(o=>{const s=Kt(u.alpha,e);u.getScene(),I&&I.stop(),I=new BABYLON.AnimationGroup("CameraAnimationGroup"),Ie=!1;const r=(De,pt,vt)=>{let ye=new BABYLON.Animation(`cameraAnimation_${De}`,De,60,BABYLON.Animation.ANIMATIONTYPE_FLOAT,BABYLON.Animation.ANIMATIONLOOPMODE_CONSTANT),He=new BABYLON.QuadraticEase;return He.setEasingMode(BABYLON.EasingFunction.EASINGMODE_EASEINOUT),ye.setEasingFunction(He),ye.setKeys([{frame:0,value:pt},{frame:100,value:vt}]),ye};let c=r("alpha",u.alpha,s),d=r("beta",u.beta,t),f=r("radius",u.radius,n),p=r("target.x",u.target.x,a.x),O=r("target.y",u.target.y,a.y),ft=r("target.z",u.target.z,a.z);I.addTargetedAnimation(c,u),I.addTargetedAnimation(d,u),I.addTargetedAnimation(f,u),I.addTargetedAnimation(p,u),I.addTargetedAnimation(O,u),I.addTargetedAnimation(ft,u),I.play(!1),I.onAnimationEndObservable.addOnce(()=>{Ie=!0,o()})}),Wt=async(e,t)=>{t.environmentIntensity=2,e.fov=.8,e.setPosition(new BABYLON.Vector3(0,0,0)),e.setTarget(new BABYLON.Vector3(-.061,9.043,-.41)),e.alpha=0,e.beta=1.6,e.radius=60,Oe(),await he({alpha:0,beta:1.6,radius:25,target:{x:je,y:Ze,z:Xe},resetToDefaultPositionFirst:!1}),Y(),Ut(e)},Y=async e=>{let t,n,a;n=Ze,a=Nt,t=L()?Ft:Pt,await he({alpha:xt,beta:a,radius:t,target:{x:je,y:n,z:Xe},resetToDefaultPositionFirst:!1})},Oe=()=>{u.lowerRadiusLimit=We,u.upperBetaLimit=Ye,u.lowerBetaLimit=Ke,u.wheelPrecision=Dt,u.minZ=.1,L()?u.upperRadiusLimit=Rt:u.upperRadiusLimit=Ge},Gt=()=>{I&&(I.pause(),_e=!0)},Yt=()=>{Ie||_e&&I&&(I.play(!1),_e=!1)},Kt=(e,t)=>{let n=(t-e)%(2*Math.PI);return n>Math.PI&&(n-=2*Math.PI),n<-Math.PI&&(n+=2*Math.PI),e+n};let Z=[];const jt=[{meshName:"Engine_low",targetFeature:g.Performance,subcategoryIndex:0,position:new R(-9.091,2.47,-.411)},{meshName:"Seat",targetFeature:g.Comfort,subcategoryIndex:0,position:new R(1.745,6.492,.382)},{meshName:"Copper_Bezel_Front",targetFeature:g.Safety,subcategoryIndex:1,position:new R(8.347,5.828,.083)},{meshName:"Charger_Box",targetFeature:g.Convenience,subcategoryIndex:0,position:new R(-9.262,8.14,.997)},{meshName:"Brake_Motor_primitive0",targetFeature:g.Safety,subcategoryIndex:0,position:new R(7.951,1.993,-1.2)},{meshName:"Cluster",targetFeature:g.Technology,subcategoryIndex:0,position:new R(4.912,8.534,.322)},{meshName:"door_left.001",targetFeature:g.Safety,subcategoryIndex:3,position:new R(-1.227,5.051,4.744)}];function Zt(e,t,n=0){console.log("Hotspot clicked:",t),W(e,n),gt(e),ht(e,n),N()}const W=(e,t=0)=>{const n=document.querySelector(`.sidebar-item[data-category="${e}"]`);if(!n)return;document.querySelectorAll(".sidebar-item").forEach(d=>d.classList.remove("activeCategory")),document.querySelectorAll(".subcategory-list").forEach(d=>d.classList.remove("activeSubcategory-list")),document.querySelectorAll(".subcategory-item").forEach(d=>d.classList.remove("activeSubCategoryItem")),document.querySelectorAll(".subcategory-content").forEach(d=>d.classList.remove("activeSubCategoryContent")),n.classList.add("activeCategory");const a=document.querySelector(`.subcategory-list[data-category="${e}"]`);if(!a)return;a.classList.add("activeSubcategory-list");const i=a.querySelectorAll(".subcategory-item");if(!i||i.length===0)return;const o=Math.min(t,i.length-1),s=i[o];if(!s)return;s.classList.add("activeSubCategoryItem");const r=s.getAttribute("data-subcategory");if(!r)return;const c=document.querySelector(`.subcategory-content[data-content="${r}"]`);c&&c.classList.add("activeSubCategoryContent"),x(e,o)};function N(){console.log("hidehotspots"),Z.forEach(e=>e.isVisible=!1)}function Be(){!L()&&M!=y.AUTO?(console.log("hide show hotspots"),Z.forEach(e=>e.isVisible=!0)):N()}function Xt(){if(!l){console.error("Scene is not initialized yet.");return}Z=[],jt.forEach(e=>{const{meshName:t,position:n,targetFeature:a,subcategoryIndex:i}=e,o=yt.CreatePlane(`hotspot_${t}`,{size:.7},l);o.position=n,o.billboardMode=bt.BILLBOARDMODE_ALL,o.isPickable=!0,At.ParseFromFileAsync(`hotspotMat_${t}`,m.OTHERS.hotspotMaterial,l).then(s=>{s.backFaceCulling=!1,s.disableLighting=!0,o.material=s}).catch(s=>{console.error(`Failed to load hotspot node material for ${t}:`,s)}),o.actionManager=new ke(l),o.actionManager.registerAction(new Et(ke.OnPickTrigger,()=>{Zt(a,t,i)})),console.warn("glowLayer.excludeMesh is missing",Ia),Z.push(o)}),l.onPointerObservable.add(e=>{var t;if(e.type===_t.POINTERMOVE){const n=(t=e.pickInfo)==null?void 0:t.pickedMesh,a=l.getEngine().getRenderingCanvas();if(a){const i=n&&Z.includes(n);a.style.cursor=i?"pointer":"default"}}}),L()&&N()}let M=null;function me(e){if(e===M)return;M=e;const t=document.getElementsByClassName("mode-switch-btn");if(Array.from(t).forEach(n=>{n.classList.remove("selected-mode")}),e===y.AUTO){const n=document.getElementById("auto-mode-switch-btn");n&&n.classList.add("selected-mode"),Qt()}else{const n=document.getElementById("manual-mode-switch-btn");n&&n.classList.add("selected-mode");const a=document.getElementById("tabs-container");a&&(a.style.display="none"),Jt()}Fe(),en(e),q()}const Jt=()=>{l.activeCamera&&l.activeCamera.attachControl(K),Y(),ie(),L()?N():Be()},Qt=()=>{l.activeCamera&&l.activeCamera.detachControl(K);async function e(){for(const t of Object.values(g)){if(M!=y.AUTO)break;await tn(t)}Qe()}e(),N()},Qe=()=>{const e=document.getElementById("auto-mode-switch-btn");e.innerHTML=`<img src="${m.HEADERICONS.playAutoplay}">Autoplay`,me(y.MANUAL)},en=e=>{let t=[],n=[];e==y.AUTO?(t=["colorBoxDiv","sidebar-container","subfeature-tabs-container","cabinView-btn"],n=["playpause-btn","autoModeTimeline-container"]):e==y.MANUAL&&(t=["playpause-btn","subtitle-container","autoModeTimeline-container"],n=["colorBoxDiv","sidebar-container","cabinView-btn"],zt()),t.forEach(a=>{const i=document.getElementById(a);i&&i.classList.add("hidden")}),n.forEach(a=>{const i=document.getElementById(a);i&&i.classList.remove("hidden")})},tn=async e=>{const t=Date.now(),n=C.AutoPlayTimes[e];Vt(e,n);for(let o=0;o<C[e].length&&M==y.AUTO;o++){await x(e,o,y.AUTO);const s=C[e][o].isSleepOnAutoMode;s&&await Yn(s)}const i=(Date.now()-t)/1e3;console.log(`category autoplay tag ${e} took ${i} seconds`)};let A=null,T=null,z=null,U=null,oe=null,se=null;function nn(){var t;const e=document.createElement("div");return e.id="bottom-btn-container",e.innerHTML=`
  <div id="playback-button-container">
    <div id="playback-buttons">
      <div id="prev-button">
        <img src="${m.OTHERS.nextIcon}" alt="Prev Icon" />
        <span class="playback-button-text">Prev</span>
      </div>
      <div id="exit-button">
        <img src="${m.OTHERS.exitIcon}" alt="Exit Icon" />
        <span class="playback-button-text">Exit</span>
      </div>
      <div id="replay-button">
        <img src="${m.OTHERS.replayIcon}" alt="Replay Icon" />
        <span class="playback-button-text">Replay</span>
      </div>
      <div id="next-button">
        <img src="${m.OTHERS.nextIcon}" alt="Next Icon" />
        <span class="playback-button-text">Next</span>
      </div>
    </div>
  </div>
  <div id="start-button-container">
    <div id="start-button">
        <img src="${m.OTHERS.startIcon}" alt="Exit Icon" />
        <span class="playback-button-text">Start</span>
      </div>
  </div>
  `,z=e.querySelector("#prev-button"),U=e.querySelector("#next-button"),oe=e.querySelector("#replay-button"),se=e.querySelector("#start-button"),(t=e.querySelector("#exit-button"))==null||t.addEventListener("click",()=>{q(),Y(),ie(),mt()}),z==null||z.addEventListener("click",()=>{sn()}),U==null||U.addEventListener("click",()=>{on()}),oe==null||oe.addEventListener("click",()=>{rn()}),se==null||se.addEventListener("click",()=>{ln()}),et(),e}function et(){const e=document.getElementById("playback-button-container"),t=document.getElementById("start-button-container");e&&t&&(e.classList.add("hidden"),t.classList.remove("hidden")),t&&M===y.AUTO&&t.classList.add("hidden")}function an(){const e=document.getElementById("playback-button-container"),t=document.getElementById("start-button-container");e&&t&&M===y.MANUAL&&(e.classList.remove("hidden"),t.classList.add("hidden")),t&&M===y.AUTO&&t.classList.add("hidden")}function G(e,t=0){A=e,T=t}function on(){if(A&&T!==null){const e=Object.keys(C),t=C[A];if(!t)return;if(T>=t.length-1){const a=e.indexOf(A);if(a<e.length-1){const i=e[a+1];G(i,0),x(i,0),W(i,0)}}else{const a=T+1;G(A,a),x(A,a),W(A,a)}we()}}function sn(){if(A&&T!==null){const e=Object.keys(C);if(!C[A])return;if(T<=0){const a=e.indexOf(A);if(a>0){const i=e[a-1],o=C[i].length-1;G(i,o),x(i,o),W(i,o)}}else{const a=T-1;G(A,a),x(A,a),W(A,a)}we()}}function rn(){A&&T!==null&&x(A,T)}function ln(){x(g.Performance,0),G(g.Performance,0),W(g.Performance,0)}function we(){var o;const e=Object.keys(C);if(A===null||T===null)return;const t=e.indexOf(A),n=((o=C[A])==null?void 0:o.length)??0,a=t===0&&T===0,i=t+1==e.length-1&&T==n-1;console.log("islastCategory",i,t,e.length-1,T==n-1),z&&z.classList.toggle("disabled",a),U&&U.classList.toggle("disabled",i)}let X=null,J=[];const cn=e=>{if(!e||e.length===0)return;e.sort((a,i)=>a.sequence-i.sequence);const t={};e.forEach(a=>{t[a.sequence]||(t[a.sequence]=[]),t[a.sequence].push(a)});const n=Object.keys(t).map(Number).sort((a,i)=>a-i);n.length>0&&Te(n,t)};function Te(e,t,n=0){if(n>=e.length)return;const a=e[n],i=t[a];let o=0;const s=i.filter(r=>!r.loop);i.forEach(r=>{const c=pe.find(d=>d.name===r.name);if(c){let d=0;const f=r.noOfIterations||1,p=()=>{if(d>=f){typeof r.onComplete=="function"&&r.onComplete(),o++,o===s.length&&Te(e,t,n+1);return}d++,r.iterationEndFrame&&d==f&&c.start(r.loop,1,r.startFrame,r.iterationEndFrame),r.endFrame!==null?c.start(r.loop,1,r.startFrame,r.endFrame):c.start(r.loop,1),c.speedRatio=r.speed,c.onAnimationGroupEndObservable.addOnce(()=>{typeof r.onIterationComplete=="function"&&r.onIterationComplete(d),setTimeout(p,50)})};p()}else o++,o===s.length&&Te(e,t,n+1)})}const dn=()=>{J=[],l.animationGroups.forEach(e=>{e.isPlaying&&(e.pause(),J.push(e))}),nt(),l.animatables.forEach(e=>{e.isPlaying&&(e.pause(),J.push(e))})},un=()=>{J.forEach(e=>e.play()),J=[],tt()},mn=()=>{pe.forEach(e=>{e.onAnimationGroupEndObservable.clear(),e.goToFrame(0),e.reset(),e.stop()})},tt=()=>{Q=.5;const e=l.getMaterialByName("Hill_Hold");e&&Object.keys(e).forEach(t=>{const n=e[t];n instanceof h.Texture&&gn(n,l)})};let Q=.5;const gn=(e,t)=>{X||(X=t.onBeforeRenderObservable.add(()=>{const n=t.getEngine().getDeltaTime()/1e3;e.vOffset-=Q*n}),e.metadata={isSlowing:!1})},nt=()=>{X&&(l.onBeforeRenderObservable.remove(X),X=null)},hn=async e=>{const t=[];if(e.forEach(n=>{const a=pe.find(i=>i.name===n);if(a){const i=new Promise(o=>{const s=setInterval(()=>{a.speedRatio>.01?a.speedRatio*=.9:(a.speedRatio=0,clearInterval(s),o())},15)});t.push(i)}}),e.includes("roadAnim")){const n=l.getMaterialByName("Hill_Hold");n&&Object.keys(n).forEach(a=>{const i=n[a];i instanceof h.Texture&&t.push(fn(i))})}await Promise.all(t)},fn=e=>new Promise(t=>{var a;if((a=e.metadata)!=null&&a.isSlowing)return t();e.metadata={isSlowing:!0};const n=setInterval(()=>{Q>.01?Q*=.9:(Q=0,clearInterval(n),t())},50)}),pn=async(e,t,n,a,i)=>{var p;const o=l.getMaterialByName(e);if(!o)return;vn(e,i);const s=o.emissiveTexture||o.albedoTexture;if(!s)return;const r=s.uOffset;((p=s.animations)==null?void 0:p.find(O=>O.name==="shineAnimation"))&&l.stopAnimation(s);const d=new h.Animation("shineAnimation","uOffset",60,h.Animation.ANIMATIONTYPE_FLOAT,h.Animation.ANIMATIONLOOPMODE_CYCLE),f=[{frame:0,value:t},{frame:a,value:n}];d.setKeys(f),s.animations=[d],l.beginAnimation(s,0,a,!1,1,()=>{s.uOffset=r})},vn=(e,t)=>{const n=l.getMaterialByName(e);if(!n)return;const a=h.Color3.FromHexString(t);(n instanceof h.PBRMaterial||n instanceof h.StandardMaterial)&&(n.emissiveColor=a)},yn=(e,t=1e3)=>{const n=Zn(e);if(!n)return;const a=`blinkAnimation_${n.name}`;if(n.animations.find(r=>r.name===a)){l.beginAnimation(n,0,12,!0,t/1e3);return}const o=new v(a,"visibility",10,v.ANIMATIONTYPE_FLOAT,v.ANIMATIONLOOPMODE_CYCLE),s=[{frame:0,value:1},{frame:5,value:1},{frame:6,value:0},{frame:11,value:0},{frame:12,value:1}];o.setKeys(s),o.enableBlending=!1,n.animations.push(o),l.beginAnimation(n,0,12,!0,t/1e3)},bn=()=>{if(!l)return;let e=l.animations.find(a=>a.name==="iblIntensityAnimation");if(!e){e=new v("iblIntensityAnimation","environmentIntensity",60,v.ANIMATIONTYPE_FLOAT,v.ANIMATIONLOOPMODE_CONSTANT);const a=[{frame:0,value:l.environmentIntensity},{frame:60,value:.45}];e.setKeys(a),l.animations.push(e)}l.beginDirectAnimation(l,[e],0,60,!1),l.fogMode=It.FOGMODE_EXP,l.fogColor=h.Color3.FromHexString("#000000").toLinearSpace(),l.fogDensity=0;let t=l.animations.find(a=>a.name==="fogDensityAnimation");if(!t){t=new v("fogDensityAnimation","fogDensity",60,v.ANIMATIONTYPE_FLOAT,v.ANIMATIONLOOPMODE_CONSTANT);const a=[{frame:0,value:l.fogDensity},{frame:60,value:.007}];t.setKeys(a),l.animations.push(t)}l.beginDirectAnimation(l,[t],0,60,!1);const n=l.lights.find(a=>a instanceof h.DirectionalLight);if(n){let a=l.animations.find(i=>i.name==="lightIntensityAnimation");if(!a){a=new v("lightIntensityAnimation","intensity",60,v.ANIMATIONTYPE_FLOAT,v.ANIMATIONLOOPMODE_CONSTANT);const i=[{frame:0,value:n.intensity},{frame:60,value:1}];a.setKeys(i),l.animations.push(a)}l.beginDirectAnimation(n,[a],0,60,!1)}},An=()=>{if(!l)return;const e=2,t=0,n=4;if(l.environmentIntensity===e&&l.fogDensity===t)return;let a=new v("iblResetAnimation","environmentIntensity",60,v.ANIMATIONTYPE_FLOAT,v.ANIMATIONLOOPMODE_CONSTANT);const i=[{frame:0,value:l.environmentIntensity},{frame:60,value:e}];a.setKeys(i),l.animations.push(a),l.beginDirectAnimation(l,[a],0,60,!1);let o=new v("fogResetAnimation","fogDensity",60,v.ANIMATIONTYPE_FLOAT,v.ANIMATIONLOOPMODE_CONSTANT);const s=[{frame:0,value:l.fogDensity},{frame:60,value:t}];o.setKeys(s),l.animations.push(o),l.beginDirectAnimation(l,[o],0,60,!1);const r=l.lights.find(c=>c instanceof h.DirectionalLight);if(r){let c=new v("lightResetAnimation","intensity",60,v.ANIMATIONTYPE_FLOAT,v.ANIMATIONLOOPMODE_CONSTANT);const d=[{frame:0,value:r.intensity},{frame:60,value:n}];c.setKeys(d),l.animations.push(c),l.beginDirectAnimation(r,[c],0,60,!1)}},H={},_=(e,t=!0)=>{const n=l.getMeshByName(e);if(!n||!(n instanceof BABYLON.Mesh)||H[e]||(t&&(n.renderingGroupId=1),!S))return;S.addMesh(n,BABYLON.Color3.FromHexString(ue)),S.blurHorizontalSize=0,S.blurVerticalSize=0,S.innerGlow=!1;let a=0,i=!0,o=performance.now();const s=1e3/24,r=.1,c=.5,d=1;function f(){if(!H[e])return;const p=performance.now();p-o>=s&&(o=p,i?(a=BABYLON.Scalar.Lerp(a,d,r),a>=d*.95&&(i=!1)):(a=BABYLON.Scalar.Lerp(a,c,r),a<=c*1.05&&(i=!0)),S.blurHorizontalSize=a*3,S.blurVerticalSize=a*3),requestAnimationFrame(f)}setTimeout(()=>{H[e]=!0,requestAnimationFrame(f)},50),H[e]=!0},En=()=>{Object.keys(H).forEach(e=>{const t=l.getMeshByName(e);!t||!(t instanceof BABYLON.Mesh)||(S&&S.removeMesh(t),t.renderingGroupId=0)}),Object.keys(H).forEach(e=>{delete H[e]}),Cn()},Ce=new Map,_n=()=>{Pe.forEach(e=>{e.material instanceof BABYLON.PBRMaterial&&(Ce.has(e.name)||Ce.set(e.name,{transparencyMode:e.material.transparencyMode??BABYLON.Material.MATERIAL_OPAQUE,alpha:e.material.alpha??1}))})},In=()=>{Pe.forEach(e=>{if(e.material instanceof BABYLON.PBRMaterial){const t=Ce.get(e.name);if(t&&(e.material.transparencyMode=t.transparencyMode,e.material.alpha=t.alpha),e.visibility=1,e.material.name==="Body_blue_Big Body"){const n=l.getMaterialByName("BayDoor"),a=l.getMaterialByName("Body_blue_Big Body");a&&n&&(a.albedoColor=n.albedoColor.clone())}}}),l.markAllMaterialsAsDirty(BABYLON.Material.AllDirtyFlag)},Tn=(e,t)=>{e.forEach(a=>{const i=l.getMaterialByName(a);i&&(i.transparencyMode=BABYLON.Material.MATERIAL_ALPHABLEND,i.alpha=.2)});const n=l.getMeshByName(t);n&&(n.overlayColor=BABYLON.Color3.FromHexString(ue),n.overlayAlpha=.1,n.renderOverlay=!0,n.outlineColor=BABYLON.Color3.FromHexString(ue),n.outlineWidth=.001,n.renderOutline=!0)},Cn=()=>{l.meshes.forEach(e=>{e.renderOverlay=!1,e.renderOutline=!1})};let b=null,ee=!1;const at=()=>{b&&(b.pause(),b.currentTime=0,b=null)},Mn=()=>{b&&!b.paused&&b.pause()},Sn=()=>{b&&b.paused&&b.play()},Ln=()=>{ee?Bn():On(),ee=!ee,wn()},On=()=>{b&&(b.volume=0)},Bn=()=>{b&&(b.volume=1)},wn=()=>{const e=document.querySelector("#volume-icon");e&&(e.src=ee?m.HEADERICONS.volumeOff:m.HEADERICONS.volumeOn)},Ve=(e,t)=>new Promise((n,a)=>{const i=m.VOICEOVERS;(t+1).toString();const o=E(e);i[o]&&i[o][t+1]?(at(),b=new Audio(i[o][t+1]),b.volume=ee?0:1,b.play().then(()=>{}).catch(s=>{a(s)}),b.onended=()=>{b=null,n()}):a(new Error("Voiceover not found"))});let V=!1,xe=0,fe=0,it,ot,$=!1;const xn=(e=9e3,t=1.5)=>{if(!u||$)return;$=!0,V=!1,xe=0;const n=u.target.subtract(u.position).normalize(),a=u.position.subtract(u.target).length(),o=t*(s=>s>=2&&s<=15?.5:s<2?1:2.5)(a);ot=u.position.add(n.scale(o)),fe=performance.now(),it=u.position.clone(),Ne(u,e)},Ne=(e,t)=>{if(!$||V)return;const n=performance.now()-fe+xe,a=Math.min(n/t,1);e.position=BABYLON.Vector3.Lerp(it,ot,a),a<1?requestAnimationFrame(()=>Ne(e,t)):$=!1},Nn=()=>{$&&!V&&(V=!0,xe+=performance.now()-fe)},Pn=(e=9e3)=>{$&&V&&(V=!1,fe=performance.now(),Ne(u,e))},Fn=()=>{$=!1,V=!1};let pe=[],re=!1,ae=!1,Pe=[],be=!1;const x=async(e,t,n=y.MANUAL)=>{q(),Hn(e,t),u.detachControl(),an(),ht(e,t),G(e,t),aa(),we();const a=C[e][t];let i=a.camera;const o=a.highlightMesh;N();const s=a.showMesh,r=a.isRoadAnim,c=a.hideMesh,d=a.zoomEffect;if(!i)return;c&&kn(c),a.manualConfig&&M==y.MANUAL&&a.manualConfig.isMobile==ve()&&(i=a.manualConfig.camera),await he({alpha:i.alpha??0,beta:i.beta??0,radius:i.radius??10,target:{x:i.x??0,y:i.y??0,z:i.z??0},resetToDefaultPositionFirst:!1}),i.fov&&await lt(i.fov);const f=jn(i);if(!(u.radius!=f.radius||u.beta!=f.beta)){if(n==y.AUTO&&Dn(e,a),s&&s.forEach(p=>{Me(p)}),"animations"in a&&Array.isArray(a.animations)){const p=a.animations;cn(p)}o&&o(),d!=!1&&xn(),r&&tt(),n===y.AUTO?await Ve(e,t):Ve(e,t)}},q=()=>{En(),mn(),Fn(),nt(),at(),Vn(),In(),wt(),Mt(),Kn(),Rn(),An(),ra(),et(),ia(),u.attachControl(K,!0),ae&&rt(),L()?N():Be()},Rn=()=>{u.fov=.8},Dn=(e,t)=>{const n=document.getElementById("subtitle-container"),a=document.getElementById("subtitle-description"),i=document.getElementById("subtitle-heading");a&&i&&(n==null||n.classList.remove("hidden"),i.innerHTML=`
        <span id = "mainheading"> ${e} | </span>
        <span id = "subheading">${t.title}</span>`,a.innerHTML=t.content)},Hn=(e,t)=>{var o;const n=document.querySelectorAll("#tabs .tab"),a=document.getElementById("tab-content");if(!n.length||!a)return;n.forEach(s=>s.classList.remove("active")),(o=n[t])==null||o.classList.add("active");const i=C[e][t];a.innerHTML=`
        <h3>${i.title}</h3>
        <p>${i.content}</p>
    `,a.style.display="block"},$e=e=>{e.forEach(t=>{t.stop(),pe.push(t)})},kn=e=>{e.forEach(t=>{let n=l.getMeshByName(t);n&&(n.isVisible=!1)})},Vn=()=>{l.meshes.forEach(e=>{Je.includes(e.name)?e.isVisible=!1:e.isVisible=!0})},Me=e=>{const t=l.getMeshByName(e);t&&(t.isVisible=!0)},qe=()=>{Je.forEach(e=>{const t=l.getMeshByName(e);t&&(t.isVisible=!1)})},st=e=>{console.log("changeVehicleColor",e);const t=document.getElementById("colorBoxName"),n=document.getElementsByClassName("colorBtn"),a=document.getElementById(e);l.getMaterialByName("BayDoor");let i=l.getMaterialByName("Body_Color_Base");if(l.getMaterialByName("TVS_Logo_Baydoor"),!i)return;let o=i.albedoColor.clone(),s=e===w.PristineWhite?BABYLON.Color3.FromHexString("#ebecea").toLinearSpace():BABYLON.Color3.FromHexString("#3172ad").toLinearSpace();t&&(t.innerHTML=e);const r=new BABYLON.Animation("colorTransition","albedoColor",30,BABYLON.Animation.ANIMATIONTYPE_COLOR3,BABYLON.Animation.ANIMATIONLOOPMODE_CONSTANT),c=[{frame:0,value:o},{frame:5,value:s}];r.setKeys(c),[i].forEach(d=>{d.animations=[],d.animations.push(r),l.beginAnimation(d,0,5,!1)});for(let d=0;d<n.length;d++)n[d].classList.remove("active");a&&a.classList.add("active")},$n=e=>{const t=e.querySelector("#fullscreen-icon");document.fullscreenElement?document.exitFullscreen().then(()=>{t.src=m.HEADERICONS.fullScreen}).catch(n=>{}):document.documentElement.requestFullscreen().then(()=>{t.src=m.HEADERICONS.fullScreenExit}).catch(n=>{})},qn=()=>{be||(be=!0,setTimeout(()=>{be=!1},Ht),re=!re,re?(Mn(),Gt(),dn(),Nn(),$t()):(Sn(),Yt(),un(),Pn(),qt()),document.dispatchEvent(new CustomEvent("autoModeToggle",{detail:re})))},rt=()=>{const e=document.getElementById("cabinView-icon");ae?(Un(),e.src=m.HEADERICONS.cabinView):(zn(),ie(),e.src=m.HEADERICONS.cabinViewExit)},lt=e=>{const t=new BABYLON.Animation("fovAnimation","fov",60,BABYLON.Animation.ANIMATIONTYPE_FLOAT,BABYLON.Animation.ANIMATIONLOOPMODE_CONSTANT);t.setKeys([{frame:0,value:u.fov},{frame:90,value:e}]);const n=new BABYLON.SineEase;return n.setEasingMode(BABYLON.EasingFunction.EASINGMODE_EASEINOUT),t.setEasingFunction(n),u.animations=u.animations||[],u.animations.push(t),l.beginAnimation(u,0,90,!1).waitAsync()},zn=async()=>{q(),ae=!0,N(),await he({alpha:B.alpha,beta:B.beta,radius:B.radius,target:{x:B.x,y:B.y,z:B.z}}),ae&&(u.lowerRadiusLimit=B.radius-1,u.upperRadiusLimit=B.radius+1),await lt(B.fov)},Un=()=>{ae=!1,Oe(),q(),Y()},Wn=e=>{Pe=e},ve=()=>{const e=window.innerWidth<=768,t=/Android|iPhone|iPad|iPod|Opera Mini|IEMobile/i.test(navigator.userAgent);return e||t},Gn=()=>{var e,t;l.debugLayer.show(),(e=document.getElementById("sidebar-container"))==null||e.classList.add("hidden"),(t=document.getElementById("header-container"))==null||t.classList.add("hidden")};let le=!1;const Yn=e=>(le=!1,new Promise((t,n)=>{le&&n(new Error("Execution stopped permanently")),setTimeout(()=>{le&&n(new Error("Execution stopped permanently")),t()},e)})),Kn=()=>{le=!0},jn=e=>({alpha:e.alpha,beta:Math.min(Ye,Math.max(Ke,e.beta)),radius:Math.min(Ge,Math.max(We,e.radius))}),Zn=e=>l.getMeshByName(e),Xn=(e,t)=>{const n=t.getMeshByName(e);!n||!n.material||n.material&&(n.material.transparencyMode=BABYLON.Material.MATERIAL_ALPHABLEND)},L=()=>ve()?window.screen.orientation.angle===0||window.screen.orientation.angle===180:!1,Jn=()=>{console.log("isDeviceRotated"),window.addEventListener("orientationchange",()=>{console.log("isDeviceRotated - orientation",L()),Oe(),Y(),Fe(),L()?(Qe(),ie(),mt(),q(),N()):Be()})},Qn=new URLSearchParams(window.location.search),ze=Qn.get("baseurl"),ea="/three-wheelers/king-ev-max",Se=()=>{ze&&window.top?window.top.location.href=ze+ea:console.warn("Base URL not found in query params")},ta=async(e,t,n)=>{try{const a=e.getMeshByName(t);if(!a)return;const i=await fetch(n);if(!i.ok)throw new Error(`Failed to load shader JSON: ${i.statusText}`);const o=await i.json(),s=new BABYLON.NodeMaterial("nodeShader",e);await s.loadFromSerialization(o),s.build(!1),a.material=s}catch{}},ct=()=>document.getElementById("headerLogoImg"),dt=()=>{var e;(e=ct())==null||e.classList.add("hidden")},Le=()=>{var e;(e=ct())==null||e.classList.remove("hidden")},Fe=()=>{console.log("updateHeaderBrandLogoVisibility",L(),ve(),navigator.userAgent),L()||M===y.AUTO?Le():dt()};window.addEventListener("resize",()=>{Fe()});let na=.05,j=0,te=0;const aa=()=>{te=2},ia=()=>{te=0},oa=(e,t,n)=>{e.getEngine().getCaps().maxMSAASamples;let o=!0;const s=new h.DefaultRenderingPipeline("defaultPipeline",!0,e,[t]);s.fxaaEnabled=o,s.imageProcessingEnabled=!0,s.imageProcessing.toneMappingEnabled=!0,s.imageProcessing.toneMappingType=BABYLON.ImageProcessingConfiguration.TONEMAPPING_ACES,s.imageProcessing.exposure=1,s.imageProcessing.contrast=1,s.imageProcessing.vignetteEnabled=!0,s.imageProcessing.vignetteStretch=.3,s.imageProcessing.vignetteCenterX=0,s.imageProcessing.vignetteCenterY=1,s.imageProcessing.vignetteColor=new h.Color4(0,0,0,1),s.imageProcessing.vignetteBlendMode=0,s.imageProcessing.vignetteWeight=j=0,e.onBeforeRenderObservable.add(()=>{Math.abs(j-te)>.01?(j+=(te-j)*na,s.imageProcessing.vignetteWeight=j):s.imageProcessing.vignetteWeight=te});const r=new h.GlowLayer("glow",e);return r.intensity=.8,{pipeline:s,glowLayer:r}};async function D(e,t){const n=l.getMeshByName(e);if(!n){console.warn(`Mesh with name "${e}" not found.`);return}try{const a=await h.NodeMaterial.ParseFromFileAsync("iconMaterial",t,l);n.material=a}catch(a){console.error("Failed to load node material:",a)}}function sa(){const e=document.createElement("div");return e.id="staticTextContainer",e.innerHTML=`
    <div id="staticInfo-container-row" class="static-layout-row">
        <p id="mainStaticText">60</p>
        <p id="subStaticText">KM/hr</p>
    </div>

    <div id="staticInfo-container-column" class="static-layout-column hidden">
        <p id="columnLabel">No roll-back for</p>
        <p id="columnValue">180 secs</p>
    </div>
  `,e.classList.add("hidden"),e}function P(e,t,n=20.5,a="row"){const i=document.getElementById("staticInfo-container-row"),o=document.getElementById("staticInfo-container-column"),s=document.getElementById("staticTextContainer");if(!(!s||!i||!o))if(s.style.top=`${n}%`,ve()&&(s.style.top=`${20.5}%`),a==="row"){i.classList.remove("hidden"),o.classList.add("hidden");const r=document.getElementById("mainStaticText"),c=document.getElementById("subStaticText");r&&(r.textContent=e),c&&(c.textContent=t)}else{o.classList.remove("hidden"),i.classList.add("hidden");const r=document.getElementById("columnLabel"),c=document.getElementById("columnValue");r&&(r.textContent=e),c&&(c.textContent=t)}}function F(e="default"){if(e==="default"){const t=document.getElementById("staticTextContainer");t&&t.classList.remove("hidden")}}function ra(){const e=document.getElementById("staticTextContainer");e&&e.classList.add("hidden")}const la=[],ca=[{name:"Water_Action",sequence:0,speed:1,loop:!1,startFrame:0,endFrame:null,reverse:!1},{name:"Water_Tank_Glass_Action",sequence:0,speed:1,loop:!1,startFrame:0,endFrame:null,reverse:!1},{name:"Water_Wading_Arrow_Action",sequence:0,speed:1,loop:!1,startFrame:0,endFrame:null,reverse:!1},{name:"Water_Wading_Text_Action",sequence:0,speed:1,loop:!1,startFrame:0,endFrame:null,reverse:!1},{name:"Rotation_Rear_Tyre_Action",sequence:0,speed:2,loop:!0,startFrame:0,endFrame:null,reverse:!1},{name:"Rotation_Front_Tyre_Action",sequence:0,speed:2,loop:!0,startFrame:0,endFrame:null,reverse:!1}],C={[g.Performance]:[{title:"Max pick up",content:"Class-leading 0-30 pickup in 5.9 seconds, even with load.",camera:{alpha:.837,beta:1.0395,radius:22.2872,x:-.723,y:7.612,z:.695},highlightMesh:()=>{_("Engine_N603",!0),P("Pickup in 5.9 secs","0-30 KM/Hr",12,"column"),F()},isRoadAnim:!0,animations:[{name:"Rotation_Rear_Tyre_Action",sequence:0,speed:2,loop:!0,startFrame:0,endFrame:null,reverse:!1},{name:"Rotation_Front_Tyre_Action",sequence:0,speed:2,loop:!0,startFrame:0,endFrame:null,reverse:!1}]},{title:"Max speed",content:"Top speed of 60 km/h ensure faster deliveries, more profit.",camera:{alpha:1.4597,beta:1.5923,radius:40.9816,x:-.01,y:8.711,z:-.026},highlightMesh:()=>{P("Max Speed","60 Km/h",12,"column"),F()},animations:[]},{title:"Always be ready",content:"Fastest Charging Time 0-100% in just 3 hours 10 minutes.",camera:{alpha:1.0783,beta:1.2186,radius:34.7685,x:-1.084,y:7.718,z:.535},highlightMesh:()=>{_("Battery_Pack_N603_primitive0"),St()},animations:[{name:"Rotation_Charging_Lid_Action",sequence:0,speed:1,loop:!1,startFrame:0,endFrame:null,reverse:!1,onComplete:()=>_("Battery_Charging_Port",!1)}]},{title:"Go Far",content:"Travel longer with 156 km (GVW) real-world range.",camera:{alpha:1.4597,beta:1.5923,radius:40.9816,x:-.01,y:8.711,z:-.026},resetToDefaultPositionFirst:!0,isRoadAnim:!0,showMesh:["Milestone"],highlightMesh:()=>{Bt()},animations:[{name:"Rotation_Rear_Tyre_Action",sequence:0,speed:6,loop:!0,startFrame:0,endFrame:null,reverse:!1},{name:"Rotation_Front_Tyre_Action",sequence:0,speed:6,loop:!0,startFrame:0,endFrame:null,reverse:!1},{name:"Milestone_Action",sequence:0,speed:1.5,loop:!1,startFrame:0,endFrame:null,reverse:!1,noOfIterations:4,iterationEndFrame:58,onIterationComplete:e=>{e==4&&(hn(["Rotation_Rear_Tyre_Action","Rotation_Front_Tyre_Action","roadAnim"]),Me("179_Text"),Me("KMS_Text"))}}]},{title:"Carry More",content:"187 Cubic Feet of Volumetric Capacity. Carry more per trip.",camera:{alpha:.6742,beta:1.2796,radius:46.0186,x:0,y:7.5,z:0},highlightMesh:()=>{},animations:[]},{title:"Climb Confidently",content:"Gradeability of 28.7 %. Drive on slopes with confidence.",camera:{alpha:1.5,beta:1.5,radius:44,x:2,y:7.5,z:0},highlightMesh:()=>{P("Gradeability","28.7%",12,"column"),F()},animations:la},{title:"High Ground Clearance",content:"Ground Clearance of 235 mm with the lowest loading height of 703 mm.",camera:{alpha:1.4597,beta:1.5923,radius:40.9816,x:-.01,y:8.711,z:-.026},highlightMesh:()=>{P("High Ground Clearance","235 mm",12,"column"),F()},animations:[]},{title:"Peace of Mind",content:"Worry-free drives with 6yr/1.5 lakh km warranty.",camera:{alpha:1.4597,beta:1.5923,radius:40.9816,x:-.01,y:8.711,z:-.026},highlightMesh:()=>{P("Warranty","6yr/1.5 Lakh KMs",12,"column"),F()},animations:[]}],[g.Comfort]:[{title:"Fully Rolling Windows",content:"Segment first Full-Size Rolling Windows for improved ventilation.",camera:{alpha:1.5684,beta:1.5185,radius:26.0366,x:4.866,y:9.717,z:-.47},highlightMesh:()=>{_("Window_L_primitive1",!1)},animations:[]},{title:"Roof Trim Provision",content:"Segment-First Roof Trim reduces cabin temperature by up to 6Â°C.",camera:{alpha:1.9459,beta:1.65,radius:8.5564,x:5.298,y:10.156,z:2.326},highlightMesh:()=>{},animations:[]},{title:"Bump-Free Drive",content:"Dual-rate suspension ensure smooth rides on rough terrain.",camera:{alpha:-.9133,beta:1.4895,radius:17.2698,x:4.788,y:1.932,z:5.435},highlightMesh:()=>{}},{title:"Relaxed Drive",content:"Wide-backed ergonomic seat offers superior driving comfort.",camera:{alpha:-5.8645,beta:1.0734,radius:13.5185,x:1.369,y:7.14,z:-1.733},highlightMesh:()=>{_("Seat_primitive0",!0),_("Seat_Backrest_primitive0",!0)},hideMesh:["Windshield"],animations:[]}],[g.Design]:[{title:"Sleek Headlamp mask",content:"With 3D Stallion logo featuring sleek, premium-fit textures.",camera:{alpha:-.018,beta:1.5391,radius:25.9992,x:-.03,y:7.524,z:-.9},highlightMesh:()=>pn("Glossy_Copper",0,-1,120,ue)},{title:"Large Windshield",content:"Large bonded windshield ensures clear visibility & safety.",camera:{alpha:3.1631,beta:1.4966,radius:8.5387,x:8.47,y:11.193,z:-.592},highlightMesh:()=>_("Front_Fender",!1)},{title:"Upscale Cabin",content:"Spacious Cabin with inner door trim & plush interiors.",camera:{alpha:9.4427,beta:1.1979,radius:4.7515,x:6.213,y:9.909,z:-.681,fov:1.2135},highlightMesh:()=>_("Front_Fender",!1)},{title:"Elegant Dashboard",content:"Piano black bezel design for a premium in-cabin experience.",camera:{alpha:3.172,beta:.8943,radius:7.2706,x:8.598,y:8.523,z:-.555},highlightMesh:()=>{}}],[g.Safety]:[{title:"Max Visibility",content:"LED headlights and tail lights improves night visibility.",camera:{alpha:7.0768,beta:1.3214,radius:36,x:3.524,y:5.788,z:-3.535},highlightMesh:()=>{yn("Indicator_Glow",1e3),bn()},showMesh:["Healight_Glow","Indicator_Glow","LightBeam","Backlight_Glow"]},{title:"Twin-Axis ORVMs",content:"Twin-axis ORVMs provide clear view for enhanced safety.",camera:{alpha:2.9987,beta:1.5045,radius:3.5006,x:3.153,y:9.926,z:5.607},highlightMesh:()=>_("Brake_Motor_primitive0",!1)},{title:"Water Wading Power",content:"500 mm water wading capacity ensures an all-weather use.",camera:{alpha:1.4597,beta:1.5923,radius:40.9816,x:-.01,y:8.711,z:-.026},animationsToPlayInLoop:["Rotation_Rear_Tyre_Action","Rotation_Front_Tyre_Action"],highlightMesh:()=>{P("Water Wading Power","500 mm",12,"column"),F()},animations:ca},{title:"Effortless braking",content:"200 mm drum brakes offer the shortest braking distance.",camera:{alpha:-1.1056,beta:1.4381,radius:13.5176,x:7.864,y:1.464,z:3.556},highlightMesh:()=>{}},{title:"Max Stability",content:"And superior wheelbase that resists front lifting.",camera:{alpha:1.4597,beta:1.5923,radius:40.9816,x:-.01,y:8.711,z:-.026},highlightMesh:()=>{P("","Superior wheelbase",12,"column"),F()}}],[g.Technology]:[{title:"Futuristic tech",content:"26 smart connected features for convenience and safety.",camera:{alpha:3.1767,beta:.9498,radius:2.5,x:6.281,y:10.229,z:-.028},resetToDefaultPositionFirst:!0,highlightMesh:async()=>{_("Cluster",!1)},zoomEffect:!1,animations:[]},{title:"Park with ease",content:"Concealed Parking Lever. Clean & clutter-free cabin.",camera:{alpha:1.5538,beta:1.5827,radius:26.0183,x:6.187,y:8.283,z:-1.081},resetToDefaultPositionFirst:!0,highlightMesh:()=>_("Engine_low",!0)},{title:"Wipe it off",content:"Zero-position wiper offer smooth operation for clear view.",camera:{alpha:-.0327,beta:1.519,radius:19.7695,x:-.443,y:10.344,z:-.87},resetToDefaultPositionFirst:!0,animations:[],highlightMesh:()=>{}},{title:"Regenerative Braking",content:"Regenerative braking for smarter energy use & extended range.",camera:{alpha:-1.0039,beta:1.4995,radius:11.0378,x:8.841,y:2.159,z:.203},resetToDefaultPositionFirst:!0,showMesh:["E_Charge_1","E_Charge_2","E_Charge_3","E_Charge_4","Regen_Brake"],animations:[{name:"E_Charge_1_Action",sequence:0,speed:1,loop:!0,startFrame:0,endFrame:null,reverse:!1},{name:"E_Charge_2_Action",sequence:0,speed:1,loop:!0,startFrame:0,endFrame:null,reverse:!1},{name:"E_Charge_3_Action",sequence:0,speed:1,loop:!0,startFrame:0,endFrame:null,reverse:!1},{name:"E_Charge_4_Action",sequence:0,speed:1,loop:!0,startFrame:0,endFrame:null,reverse:!1}],highlightMesh:()=>_("Regen_Brake",!1)},{title:"Tripod Drive Shaft",content:"Tripod drive shaft ensures durability and zero maintenance.",camera:{alpha:-3.9129,beta:1.3301,radius:23.5389,x:-2.737,y:2.448,z:-2.289},resetToDefaultPositionFirst:!0,showMesh:["E_Charge_1","E_Charge_2","E_Charge_3","E_Charge_4","Regen_Brake"],animations:[{name:"E_Charge_1_Action",sequence:0,speed:1,loop:!0,startFrame:0,endFrame:null,reverse:!1},{name:"E_Charge_2_Action",sequence:0,speed:1,loop:!0,startFrame:0,endFrame:null,reverse:!1},{name:"E_Charge_3_Action",sequence:0,speed:1,loop:!0,startFrame:0,endFrame:null,reverse:!1},{name:"E_Charge_4_Action",sequence:0,speed:1,loop:!0,startFrame:0,endFrame:null,reverse:!1}],highlightMesh:()=>_("Regen_Brake",!1)}],[g.Convenience]:[{title:"Power Gear",content:"Industry-first With 3 Drive Modes for superior gradeability & range.",camera:{alpha:-3.0688,beta:1.4638,radius:5.5,x:8.483,y:8.806,z:-.071},resetToDefaultPositionFirst:!0,highlightMesh:()=>_("Charger_Box_primitive0",!1),hideMesh:["Softop_Curtain_primitive0","Softop_Curtain_primitive1"]},{title:"Turn with Ease",content:"Low turning radius ensure easy maneuvering in tight spaces.",camera:{alpha:-.0063,beta:.8711,radius:27.2686,x:4.208,y:2.06,z:-1.428},resetToDefaultPositionFirst:!0,animationsToPlay:["Rotation_USB_Port_Action"],animations:[{name:"Rotation_USB_Port_Action",sequence:0,speed:1,loop:!1,startFrame:0,endFrame:null,reverse:!1,onComplete:()=>_("USB_Charging_Port",!1)}]},{title:"USB Charging Port",content:"USB charging port always keeps you connected.",camera:{alpha:3.6019,beta:1.194,radius:1.2511,x:8.528,y:8.047,z:-1.306},highlightMesh:()=>Tn(["SoftTop_Cloth"],"Tumble_Seat"),animationsToPlay:["Rotation_Tumble_Seat_Action"],animations:[{name:"Rotation_Tumble_Seat_Action",sequence:0,speed:1,loop:!1,startFrame:0,endFrame:null,reverse:!1}]},{title:"Lockable Glove Box",content:"Lockable glove box keeps your essentials safe.",camera:{alpha:3.1396,beta:.9429,radius:6.0383,x:7.137,y:8.812,z:-2.879},resetToDefaultPositionFirst:!0,animations:[]},{title:"Easy Access",content:"Easy ingress & egress for quick access & smooth operation.",camera:{alpha:1.49,beta:1.524,radius:30.982,x:3.941,y:7.77,z:-.428},resetToDefaultPositionFirst:!0,animations:[]}],[g.HeavyDuty]:[{title:"Max Load Deck",content:"Highest Loading area in the segment (6.6 ft deck length).",camera:{alpha:.8783,beta:1.402,radius:35.9819,x:0,y:7.5,z:0},highlightMesh:()=>{P("Max load deck","6.6 Ft",12,"column"),F()},animations:[]},{title:"Heavy performance",content:"Carry heavy loads With leaf spring suspension.",camera:{alpha:1.0326,beta:1.1495,radius:27.2871,x:-2.599,y:7.485,z:1.56},animations:[]},{title:"Strong Body",content:"Reinforced body and chassis ensure lasting durability.",camera:{alpha:2.42,beta:1.3272,radius:36,x:-.558,y:7.07,z:-.472},animations:[]},{title:"Cover more",content:'Large 12" tyres provide better stability and load capacity.',camera:{alpha:.687,beta:1.2377,radius:27.2885,x:3.047,y:3.99,z:-2.432},animations:[]}],AutoPlayTimes:{Performance:58.779,Comfort:25.36,Design:27.25,Safety:30.589,Technology:31.096,Convenience:27.352,HeavyDuty:22.062}},da={SIDEBAR:{carrot:`
        <svg width="26" height="15" viewBox="0 0 26 15" fill="currentColor" xmlns="http://www.w3.org/2000/svg">
<path fill-rule="evenodd" clip-rule="evenodd" d="M14.4233 14.3139L24.6766 4.06054C25.2624 3.47475 25.2624 2.525 24.6766 1.93921L23.9699 1.23253C23.3841 0.646748 22.4344 0.646749 21.8486 1.23254L13.0092 10.0719L4.16991 1.23254C3.58412 0.64675 2.63438 0.646749 2.04859 1.23253L1.34191 1.93921C0.756123 2.525 0.756124 3.47475 1.34191 4.06053L11.5953 14.3139C11.9703 14.6888 12.4789 14.8994 13.0092 14.8994C13.5396 14.8994 14.0482 14.6888 14.4233 14.3139Z"/>
</svg>
`}},ce={currentColor:w.PristineWhite,currentColorName:"Pristine White"},de=[];function Ue(){return ce}function ua(e,t){ce.currentColor=e,ce.currentColorName=t,st(e),de.forEach(n=>n(ce))}function ma(e){return de.push(e),()=>{const t=de.indexOf(e);t!==-1&&de.splice(t,1)}}function ut(){const e=document.createElement("div");e.classList.add("colorBoxDiv"),e.id="colorBoxDiv",e.innerHTML=`<div class="colorBtnGroup" id="color-tabs">
        <button aria-label="Pristine White" class="hex colorBtn" id="${w.PristineWhite}" data-item="Pristine White" style="background-color: #FFFFFF;">
                <div class="circle"></div>
                <img src="${m.SIDEBAR.colorSelectedWhite}" id="colorSelectedImg" style="visibility: hidden;" />
            </button>
            <button aria-label="Neptune Blue" class="hex colorBtn" id="${w.NeptuneBlue}" data-item="Neptune Blue" style="background-color: #1C66EF;">
                <div class="circle"></div>
                <img src="${m.SIDEBAR.colorSelectedBlue}" id="colorSelectedImg" style="visibility: hidden;" />
            </button>
            
           
        </div>
        <div id="colorName-container">
            <p class="colorName" id="colorBoxName">${Ue().currentColorName}</p>
        </div>`;const t=e.querySelectorAll(".colorBtn"),n=e.querySelector("#colorBoxName"),a=o=>{n.innerText=o.currentColorName,t.forEach(s=>{s.classList.remove("active"),s.style.border="none";const r=s.querySelector("img");if(r&&(r.style.visibility="hidden"),s.id===o.currentColor){s.classList.add("active");let c="white";s.id===w.PristineWhite&&(c="#1C66EF"),s.style.border=`3px solid ${c}`,r&&(r.style.visibility="visible")}})};a(Ue());const i=ma(a);return t.forEach(o=>{o.addEventListener("click",()=>{const s=o.id,r=o.dataset.item||"";ua(s,r)})}),e.addEventListener("DOMNodeRemoved",()=>{i()}),e}function ga(){const e=document.createElement("div");return e.id="sidebar-container",e.innerHTML=`
  <div id= "sidebarAndCollapseContainer">
  <div id ="sidebarAndColorBoxContainer">

  <div id="sidebar">
      <div id="sidebar-logo">
        <img src="${m.LOGO.tvsKingEvMaxLogo}" alt="tvskingevmaxlogo">
      </div>
      ${Object.values(g).map(t=>{const n=C[t]||[];return console.log("category",t),`
            <div class="sidebar-item" data-category="${t}">
              <div class="category-icon">
              <img src="${m.SIDEBAR[E(t)]||""}" alt="${t}" />

              </div>
              <p class="category-label">${t}</p>
              <span class="carrot">
                ${da.SIDEBAR.carrot}
              </span>
            </div>
            <div class="subcategory-list" data-category="${t}">
              ${n.map(a=>`
                    <div class="subcategory-item" data-subcategory="${a.title}" data-category="${t}">
                      ${a.title}
                    </div>
                    <div class="subcategory-content" data-content="${a.title}">
                      ${a.content}
                    </div>
                  `).join("")}
            </div>
          `}).join("")}
    </div>
    <div id = "colorBoxContainer">
        
    </div>
      
  </div>
    <div id="sidebarToggleBtn">
  <img src="${m.SIDEBAR.collapseIcon}"/>
</div>
<!-- <div id="sidebarToggleBtn-expandIcon" class="hidden">
  <img src="${m.SIDEBAR.expandIcon}"/>
</div> -->
    </div>
    <div id="sidebarToggleBtn-expandIcon" class="hidden">
        <img src="${m.SIDEBAR.expandIcon}"/>
      </div>
  `,ha(e),e}function E(e){return e.replace(/\s+/g,"").toLowerCase()}function ha(e){fa(e);const t=e.querySelector("#sidebar-logo");t==null||t.addEventListener("click",()=>Se());const n=e.querySelector("#colorBoxContainer");n&&n.appendChild(ut()),e.querySelectorAll(".sidebar-item").forEach(o=>{o.addEventListener("click",()=>{const s=o.getAttribute("data-category");if(!s)return;const r=o.classList.contains("activeCategory");if(e.querySelectorAll(".sidebar-item").forEach(c=>c.classList.remove("activeCategory")),e.querySelectorAll(".subcategory-list").forEach(c=>c.classList.remove("activeSubcategory-list")),r)q(),Y(),ie();else{o.classList.add("activeCategory");const c=e.querySelector(`.subcategory-list[data-category="${s}"]`);c&&c.classList.add("activeSubcategory-list"),gt(s)}})}),e.querySelectorAll(".subcategory-item").forEach(o=>{o.addEventListener("click",()=>{const s=o.getAttribute("data-subcategory"),r=o.getAttribute("data-category");if(!r)return;const d=Array.from(e.querySelectorAll(`.subcategory-item[data-category="${r}"]`)).indexOf(o);e.querySelectorAll(".subcategory-item").forEach(p=>p.classList.remove("activeSubCategoryItem")),e.querySelectorAll(".subcategory-content").forEach(p=>p.classList.remove("activeSubCategoryContent")),o.classList.add("activeSubCategoryItem");const f=e.querySelector(`.subcategory-content[data-content="${s}"]`);f&&f.classList.add("activeSubCategoryContent"),x(r,d)})})}function fa(e){const t=e.querySelector("#sidebarToggleBtn"),n=e.querySelector("#sidebarToggleBtn-expandIcon");n.classList.add("hidden"),t==null||t.addEventListener("click",()=>{e.classList.add("collapsed"),setTimeout(()=>{t.classList.add("hidden"),n.classList.remove("hidden"),Le()},380)}),n==null||n.addEventListener("click",()=>{e.classList.remove("collapsed"),n.classList.add("hidden"),t.classList.remove("hidden"),dt()})}function ie(){const e=document.getElementById("sidebar-container");e==null||e.querySelectorAll(".subcategory-item").forEach(t=>t.classList.remove("activeSubCategoryItem")),e==null||e.querySelectorAll(".subcategory-content").forEach(t=>t.classList.remove("activeSubCategoryContent"))}function mt(){const e=document.getElementById("sidebar-container");e&&(e.querySelectorAll(".sidebar-item").forEach(t=>t.classList.remove("activeCategory")),e.querySelectorAll(".subcategory-list").forEach(t=>t.classList.remove("activeSubcategory-list")))}function gt(e){console.log("scrolling to cat");const t=document.querySelector(`.sidebar-item[data-category="${e}"]`);t&&e!=g.Technology&&t.scrollIntoView({behavior:"smooth",block:"center"}),e==g.Technology&&t.scrollIntoView({behavior:"smooth",block:"center"})}function ht(e,t){console.log("scrolling to subcategory item by index");const n=document.querySelectorAll(`.subcategory-item[data-category="${e}"]`),a=n[t];if(!a)return;const i=t===n.length-1||t===n.length-2;if(e===g.Technology)if(i){const o=document.getElementById("sidebar");o?o.scrollTo({top:o.scrollHeight,behavior:"smooth"}):a.scrollIntoView({behavior:"smooth",block:"end"})}else a.scrollIntoView({behavior:"smooth",block:"center"});else a.scrollIntoView({behavior:"smooth",block:"center"})}const m={MESHES:{vehicleEnvironment:"assets/meshes/ENVIRONMENT/EV_MAX_Environment.gltf",vehicle:"assets/meshes/VEHICLE/TVS_N603.gltf"},ENV:{envfile:"assets/envfile/environment.env"},SIDEBAR:{[E(g.Performance)]:"assets/sidebarIcons/performance.svg",[E(g.Comfort)]:"assets/sidebarIcons/comfort.svg",[E(g.Design)]:"assets/sidebarIcons/design.svg",[E(g.Convenience)]:"assets/sidebarIcons/convenience.svg",[E(g.Safety)]:"assets/sidebarIcons/safety_v1.svg",[E(g.Technology)]:"assets/sidebarIcons/technology.svg",[E(g.HeavyDuty)]:"assets/sidebarIcons/heavyduty.svg",carrot:"assets/sidebarIcons/carrot.svg",colorSelectedWhite:"assets/sidebarIcons/colorSelectedWhite.svg",colorSelectedBlue:"assets/sidebarIcons/colorSelectedBlue.svg",collapseIcon:"assets/sidebarIcons/collapse.svg",expandIcon:"assets/sidebarIcons/expand.svg"},VOICEOVERS:{[E(g.Performance)]:{1:"assets/voiceovers/performance_1.mp3",2:"assets/voiceovers/performance_2.mp3",3:"assets/voiceovers/performance_3.mp3",4:"assets/voiceovers/performance_4.mp3",5:"assets/voiceovers/performance_5.mp3",6:"assets/voiceovers/performance_6.mp3",7:"assets/voiceovers/performance_7.mp3",8:"assets/voiceovers/performance_8.mp3"},[E(g.Comfort)]:{1:"assets/voiceovers/comfort_1.mp3",2:"assets/voiceovers/comfort_2.mp3",3:"assets/voiceovers/comfort_3.mp3",4:"assets/voiceovers/comfort_4.mp3"},[E(g.Design)]:{1:"assets/voiceovers/design_1.mp3",2:"assets/voiceovers/design_2.mp3",3:"assets/voiceovers/design_3.mp3",4:"assets/voiceovers/design_4.mp3"},[E(g.Convenience)]:{1:"assets/voiceovers/convenience_1.mp3",2:"assets/voiceovers/convenience_2.mp3",3:"assets/voiceovers/convenience_3.mp3",4:"assets/voiceovers/convenience_4.mp3",5:"assets/voiceovers/convenience_5.mp3"},[E(g.Safety)]:{1:"assets/voiceovers/safety_1.mp3",2:"assets/voiceovers/safety_2.mp3",3:"assets/voiceovers/safety_3.mp3",4:"assets/voiceovers/safety_4.mp3",5:"assets/voiceovers/safety_5.mp3"},[E(g.Technology)]:{1:"assets/voiceovers/technology_1.mp3",2:"assets/voiceovers/technology_2.mp3",3:"assets/voiceovers/technology_3.mp3",4:"assets/voiceovers/technology_4.mp3",5:"assets/voiceovers/technology_5.mp3"},[E(g.HeavyDuty)]:{1:"assets/voiceovers/heavyduty_1.mp3",2:"assets/voiceovers/heavyduty_2.mp3",3:"assets/voiceovers/heavyduty_3.mp3",4:"assets/voiceovers/heavyduty_4.mp3"}},LOGO:{tvsKingEvMaxLogo:"assets/headerIcons/vehicle_logo.webp"},HEADERICONS:{fullScreen:"assets/headerIcons/fullscreen_v1.svg",fullScreenExit:"assets/headerIcons/fullscreen-exit_v1.svg",volumeOn:"assets/headerIcons/volumeOn_v1.svg",volumeOff:"assets/headerIcons/volumeOff_v1.svg",play:"assets/headerIcons/play_v1.svg",playAutoplay:"assets/headerIcons/play_Autoplay.svg",pause:"assets/headerIcons/pause_v1.svg",home:"assets/headerIcons/home_v1.svg",cabinView:"assets/headerIcons/cabinView_v1.svg",cabinViewExit:"assets/headerIcons/cabinViewExit_v1.svg"},OTHERS:{rotateScreen:"assets/other/rotateScreen.gif",ao:"assets/meshes/ao.png",waterShader:"assets/meshes/Water_Shader.json",hotspotMaterial:"assets/meshes/hotspotMaterial.json",iconMaterial:"assets/meshes/iconMaterial.json",exitIcon:"assets/other/exit-v1.svg",nextIcon:"assets/other/next-v1.svg",replayIcon:"assets/other/replay.svg",startIcon:"assets/other/start.svg"}};function pa(){const e=document.createElement("div");return e.id="subfeature-tabs-container",e.innerHTML=`
            <div id="tabs"></div>
            <div id="tab-content"></div>
    `,e}function va(){const e=document.createElement("div");e.id="header-container",e.innerHTML=`
        <div id="header">
            <div id="header-logo">
                <img src="${m.LOGO.tvsKingEvMaxLogo}" alt="tvskingevmaxlogo" id = "headerLogoImg">
                <div id="mobileRotateMessage-Container">
            <div id="rotateCamera-img">
                <img src="${m.OTHERS.rotateScreen}" alt="rotateScreen">
            </div>
            <div id= "rotateCamera-text">
                <p>
                Please rotate your device to landscape to have the full experience.
                </p>
            </div>
        </div>
            </div>
            
            <div id="header-buttons">
                <div id="header-buttons-row1">
                    
                    <div id="home-btn" class="header-btn">
                        <img id="home-icon" src="${m.HEADERICONS.home}" alt="homebutton">
                    </div>
                    <div id="volume-btn" class="header-btn">
                        <img id="volume-icon" src="${m.HEADERICONS.volumeOn}" alt="volumebutton">
                    </div>
                    <div id="cabinView-btn" class="header-btn">
                        <img id="cabinView-icon" src="${m.HEADERICONS.cabinView}" alt="cabinbutton">
                    </div>
                    <div id="playpause-btn" class="header-btn">
                        <img id="playpause-icon" src="${m.HEADERICONS.pause}" alt="playpausebutton">
                    </div>
                    <div id="autoManualBtn-container" class="header-btn-long">
                        <div id="auto-mode-switch-btn" class="mode-switch-btn">
                            <img src="${m.HEADERICONS.playAutoplay}">
                                Autoplay
                        </div>
                    </div>
                    <div id="fullscreen-btn" class="header-btn">
                        <img id="fullscreen-icon" src="${m.HEADERICONS.fullScreen}" alt="fullscreenbutton">
                    </div>

                </div>
                 <div id="header-buttons-row2">
                <!-- <div class="colorBoxDiv" id="colorBoxDiv">
                    <div class="colorBtnGroup " id="color-tabs">
                            <button class="hex colorBtn" id="${w.PristineWhite}" data-item="PRISTINE WHITE" style="background-color: #FFFFFF;">
                            <div  class="circle" ></div>
                            </button>
                            <button class="hex colorBtn active" id="${w.NeptuneBlue}" data-item="NEPTUNE BLUE"  style= "background-color: #3B80FF;">
                                <div  class="circle" ></div>
                            </button>
                    </div>

                    <div id = "colorName-container">
                        <p class="colorName" id="colorBoxName">Neptune Blue</p>
                    </div>
                </div> -->
                    
                </div>

                <!-- <div id="playPause-btn" class="hidden">
                    <img id="playPause-icon" src="${m.HEADERICONS.pause}">
                </div>
                
                
                 -->

            </div>
        </div>

    `;const t=e.querySelector("#home-btn");t==null||t.addEventListener("click",()=>Se());const n=e.querySelector("#header-logo");n==null||n.addEventListener("click",()=>Se());const a=e.querySelector("#cabinView-btn");a==null||a.addEventListener("click",()=>rt());const i=e.querySelector("#fullscreen-btn");i==null||i.addEventListener("click",()=>$n(i));const o=e.querySelector("#volume-btn");o==null||o.addEventListener("click",()=>Ln()),e.querySelector("#auto-mode-switch-btn"),e.querySelector("#manual-mode-switch-btn");const s=e.querySelector("#playpause-btn"),r=e.querySelector("#playpause-icon"),c=e.querySelector("#auto-mode-switch-btn");return c==null||c.addEventListener("click",()=>{M!=y.AUTO?(me(y.AUTO),c.innerHTML="Manual"):(me(y.MANUAL),c.innerHTML=`<img src="${m.HEADERICONS.playAutoplay}">Autoplay`,r.src=m.HEADERICONS.pause)}),s==null||s.addEventListener("click",()=>{qn()}),document.addEventListener("autoModeToggle",d=>{const f=d.detail;r.src=f?m.HEADERICONS.play:m.HEADERICONS.pause}),e}function ya(){const e=document.createElement("div");e.id="loading-container",e.innerHTML=`
        <div id="loading-screen">
            <div id = "loading-logo">
                <img src="${m.LOGO.tvsKingEvMaxLogo}">
            </div>
            <div id="loading-bar-container">
                <div id="loading-bar"></div>
            </div>
        </div>
    `,document.body.appendChild(e)}function ba(e){const t=document.getElementById("loading-bar");t&&(t.style.width=`${e}%`)}function Aa(){const e=document.getElementById("loading-container");e&&setTimeout(()=>{me(y.MANUAL),e.remove(),Ea()},1100)}function Ea(){window.parent.postMessage({type:"LOADING_COMPLETED",data:"loading completed"},"*")}function _a(){const e=document.createElement("div");e.id="footer-container",e.innerHTML=`

        <div id = "subtitle-container" class="">
            <p id="subtitle-heading">
                <span id = "mainheading">heading | </span>
                <span id = "subheading">subheading</span>
        </p>
            <p id="subtitle-description">desc</p>
        </div>

        <div id = "autoModeTimeline-container">
    
        </div>
        <div id = "colorBoxFooter-container">

        </div>
        <div id = "dummyDiv">

        </div>

        
    `;const t=e.querySelector("#colorBoxFooter-container");return t&&t.appendChild(ut()),e}window.earcut=Tt;console.log("build version 18.3.2");let Ia=null;const K=document.getElementById("renderCanvas"),Re=new h.Engine(K,!0);let S,u;const Ta=()=>{const e=new h.Scene(Re);S=new h.HighlightLayer("hl",e),u=new h.ArcRotateCamera("camera",Math.PI/2,Math.PI/4,10,h.Vector3.Zero(),e),u.attachControl(K,!0);const t=new h.HemisphericLight("light",new h.Vector3(1,1,0),e);t.intensity=.6,e.createDefaultEnvironment({environmentTexture:m.ENV.envfile,createSkybox:!1,createGround:!1});const n=new h.DirectionalLight("light",new h.Vector3(-.795,-.348,-.499),e);n.position=new h.Vector3(10,20,10),n.intensity=4;const a=new h.ShadowGenerator(1024,n);return a.useBlurExponentialShadowMap=!0,a.blurKernel=32,a.setDarkness(0),a.normalBias=-.32,e.environmentTexture instanceof h.CubeTexture,e.environmentIntensity=1,Ca(e,a),Wt(u,e),e},Ca=(e,t)=>{let n=0;const a=2,i=()=>{n++;const o=Math.round(n/a*100);ba(o),n===a&&Aa()};h.SceneLoader.ImportMesh("",m.MESHES.vehicleEnvironment,"",e,(o,s,r,c)=>{const d=o[0];d.scaling=new h.Vector3(70,70,-70);const f=e.getMeshByName("Walls");c.forEach(p=>p.stop()),$e(c),qe(),f&&(f.receiveShadows=!0),i()}),h.SceneLoader.ImportMesh("",m.MESHES.vehicle,"",e,async(o,s,r,c)=>{o[0].scaling=new h.Vector3(.78,.78,-.78),o[0].position=new h.Vector3(16.557,-2.312,-.78),o[0];const d=e.getMeshByName("ENV_Dome"),f=e.getMeshByName("Hill_Hold_Platform");d&&f&&(d.receiveShadows=!0,f.receiveShadows=!0),$e(c),qe(),i(),Wn(o),Xn("Healight_Glow",e),_n(),oa(e,u),Xt(),D("ICON_7_primitive4",m.OTHERS.iconMaterial),D("ICON_6_primitive3",m.OTHERS.iconMaterial),D("ICON_5_primitive3",m.OTHERS.iconMaterial),D("ICON_4_primitive3",m.OTHERS.iconMaterial),D("ICON_3_primitive3",m.OTHERS.iconMaterial),D("ICON_2_primitive3",m.OTHERS.iconMaterial),D("ICON_1_primitive4",m.OTHERS.iconMaterial),st(w.PristineWhite),o.forEach(O=>{t.addShadowCaster(O),O.receiveShadows=!0});const p=e.getMaterialByName("Body_blue_Big Body");if(p){const O=new h.Texture(m.OTHERS.ao,e);p.ambientTexture=O}ta(e,"Water",m.OTHERS.waterShader)})};ya();const l=Ta();Re.runRenderLoop(()=>l.render());window.addEventListener("resize",()=>Re.resize());document.body.appendChild(ga());document.body.appendChild(pa());document.body.appendChild(_a());document.body.appendChild(va());document.body.appendChild(Ot());document.body.appendChild(Ct());document.body.appendChild(sa());document.body.appendChild(nn());const Ae=document.getElementById("autoModeTimeline-container");Ae==null||Ae.appendChild(kt());const Ee=document.getElementById("debuglayer-btn");Ee==null||Ee.addEventListener("click",()=>{Gn(),u.attachControl(K,!0),u.panningSensibility=60});Jn();
